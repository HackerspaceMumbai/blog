---
import Layout from "../../components/Layout.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("posts")).sort(
  (a, b) => new Date(b.data.date).valueOf() - new Date(a.data.date).valueOf()
);
---

<Layout title="Blog | Hackerspace Mumbai" description="Latest blog posts from Mumbai's largest open source community">
  <div class="container mx-auto px-4 py-8">
    <article>
      <h1 class="text-4xl font-bold mb-6">Blog Posts</h1>
      <p class="text-lg mb-8">Welcome to the Hackerspace Mumbai blog! Here you can find our latest posts.</p>
      
      <div class="space-y-6">
        {posts.map(post => (
          <article class="border border-gray-200 rounded-lg p-6 hover:shadow-lg transition-shadow">
            <a href={`/blog/${post.slug}/`} class="block">
              <h2 class="text-2xl font-semibold mb-2 text-primary hover:underline">{post.data.title}</h2>
              <p class="text-gray-600 mb-3">{post.data.description}</p>
              <div class="text-sm text-gray-500">
                By {post.data.author} on {new Date(post.data.date).toLocaleDateString('en-IN', { 
                  day: 'numeric', 
                  month: 'long', 
                  year: 'numeric' 
                })}
              </div>
            </a>
          </article>
        ))}
      </div>
    </article>
  </div>
</Layout>